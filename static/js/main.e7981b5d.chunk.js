(this["webpackJsonpblog-frontend"]=this["webpackJsonpblog-frontend"]||[]).push([[0],{26:function(e,t,a){},29:function(e,t,a){e.exports=a(45)},34:function(e,t,a){},35:function(e,t,a){},38:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),m=(a(34),a(35),a(36),a(11)),s=a.n(m),l=a(17),i=a(9),u=a(27),p=(a(38),function(){return r.a.createElement("div",{className:"loading-container"},r.a.createElement("h1",null,"Loading..."),r.a.createElement(u.a,{animation:"border",variant:"primary",role:"status"}))}),h=a(12),d=a(18),E=a(13),f=function(e){return r.a.createElement(h.a,{className:"card-container",style:{width:"18rem"}},r.a.createElement(h.a.Img,{className:"card-img",variant:"top",src:e.image}),r.a.createElement(h.a.Body,{className:"card-body"},r.a.createElement(h.a.Title,null,e.title),r.a.createElement(h.a.Text,null,"Posted on: ",e.timestamp," | Last Edit : ",e.lastUpdate),r.a.createElement(d.a,{variant:"link"},r.a.createElement(E.b,{to:"/posts/".concat(e.id)}))))},b=(a(44),function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!0),m=Object(i.a)(o,2),u=m[0],h=m[1],d=Object(n.useState)(!1),E=Object(i.a)(d,2),b=(E[0],E[1]);Object(n.useEffect)((function(){(function(){var e=Object(l.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!1),"https://vincephung-blog.glitch.me/api/posts",e.next=5,fetch("https://vincephung-blog.glitch.me/api/posts",{mode:"cors"});case 5:if(!(t=e.sent).ok){e.next=15;break}return e.next=9,t.json();case 9:return a=e.sent,c(a),h(!1),e.abrupt("return",a);case 15:b(!0),c(null);case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(0),new Error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var v=a.filter((function(e){return e.published}));return r.a.createElement("div",{className:"home-container"},u?r.a.createElement(p,null):"",r.a.createElement("h1",{className:"post-header"},"Current posts"),r.a.createElement("div",{className:"post-container"},r.a.createElement("div",{className:"post"},v.map((function(e){return r.a.createElement(f,{title:e.title,key:e._id,timestamp:e.timestamp,lastUpdate:e.lastUpdate||"Not edited",image:e.image,id:e._id})})))))}),v=(a(26),function(e){return r.a.createElement("div",{className:"commentContainer"},r.a.createElement("div",{className:"singleComment"},r.a.createElement("h4",{className:"commentAuthor"},e.author),r.a.createElement("p",null,e.content),r.a.createElement("p",{className:"commentDate"},e.timestamp)))}),g=function(e){return r.a.createElement("div",{className:"postContainer"},r.a.createElement("div",{className:"postSection"},r.a.createElement("h1",{className:"postTitle"},e.title),r.a.createElement("hr",null),r.a.createElement("p",{className:"postDate"},"Posted on ",e.timestamp),r.a.createElement("hr",null),r.a.createElement("img",{src:e.image,alt:"post img"}),r.a.createElement("hr",null),r.a.createElement("p",{className:"postContent"},e.postContent),r.a.createElement("hr",null)),r.a.createElement("div",{className:"commentForm"},r.a.createElement(h.a,null,r.a.createElement(h.a.Body,null,r.a.createElement(h.a.Title,null,"Leave a comment:"),r.a.createElement("form",{className:"form-group",onSubmit:e.handleCommentPost},r.a.createElement("label",{className:"label",htmlFor:"name"},"Name:"),r.a.createElement("input",{name:"commentAuthor",value:e.commentAuthor,onChange:e.handleCommentChange,type:"text",minLength:"5",required:!0}),r.a.createElement("hr",null),r.a.createElement("textarea",{className:"form-control",rows:"3",name:"content",value:e.commentContent,onChange:e.handleCommentChange,minLength:"5",required:!0}),r.a.createElement(d.a,{type:"submit",variant:"primary"},"Post"))))),r.a.createElement("div",{className:"commentSection"},e.comments.map((function(e){return r.a.createElement(v,{author:e.author,key:e._id,content:e.content,timestamp:e.timestamp})}))))},j=function(e){var t=e.match,a=Object(n.useState)([]),c=Object(i.a)(a,2),o=c[0],m=c[1],u=Object(n.useState)([]),h=Object(i.a)(u,2),d=h[0],E=h[1],f=Object(n.useState)(""),b=Object(i.a)(f,2),v=b[0],j=b[1],N=Object(n.useState)(""),x=Object(i.a)(N,2),O=x[0],k=x[1],w=Object(n.useState)(!0),C=Object(i.a)(w,2),y=C[0],S=C[1],B=Object(n.useState)(!1),T=Object(i.a)(B,2),A=(T[0],T[1]),L=function(){A(!0),m(null)};Object(n.useEffect)((function(){(function(){var e=Object(l.a)(s.a.mark((function e(){var a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A(!1),a="https://vincephung-blog.glitch.me/api/posts/".concat(t.params.id),e.next=5,fetch(a,{mode:"cors"});case 5:if(!(n=e.sent).ok){e.next=15;break}return e.next=9,n.json();case 9:return r=e.sent,m(r),S(!1),e.abrupt("return",r);case 15:L();case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(0),new Error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}})()(),function(){var e=Object(l.a)(s.a.mark((function e(){var a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A(!1),a="https://vincephung-blog.glitch.me/api/posts/".concat(t.params.id,"/comments"),e.next=5,fetch(a,{mode:"cors"});case 5:if(!(n=e.sent).ok){e.next=15;break}return e.next=9,n.json();case 9:return r=e.sent,E(r),S(!1),e.abrupt("return",r);case 15:L();case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(0),new Error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}()()}),[t.params.id]);var P=function(){var e=Object(l.a)(s.a.mark((function e(a){var n,r,c,o,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=v,r=O,c="https://vincephung-blog.glitch.me/api/posts/".concat(t.params.id,"/comments"),e.next=6,fetch(c,{mode:"cors",method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({author:n,content:r})});case 6:return o=e.sent,e.next=9,o.json();case 9:m=e.sent,k(""),j(""),E(d.concat(m));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,y?r.a.createElement(p,null):"",r.a.createElement(g,{title:o.title,timestamp:o.timestamp,lastUpdate:o.lastUpdate||"Not edited",image:o.image,comments:d,postContent:o.content,id:o._id,handleCommentPost:P,handleCommentChange:function(e){"commentAuthor"===e.target.name?j(e.target.value):k(e.target.value)},commentAuthor:v,commentContent:O}))},N=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"This page does not exist.",r.a.createElement(E.b,{to:"/home"},"Click this to go back to the homepage.")))},x=a(23),O=function(){return r.a.createElement(x.a,{bg:"dark",variant:"dark"},r.a.createElement(x.a.Brand,null,r.a.createElement(E.b,{to:"/home"},"Blog Home")))},k=a(3);var w=function(){return r.a.createElement(E.a,{basename:"/blog-frontend"},r.a.createElement(O,null),r.a.createElement(k.c,null,r.a.createElement(k.a,{exact:!0,path:"/home",component:b}),r.a.createElement(k.a,{exact:!0,path:"/posts/:id",component:j}),r.a.createElement(k.a,{path:"/",component:N})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.e7981b5d.chunk.js.map