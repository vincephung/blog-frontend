(this["webpackJsonpblog-frontend"]=this["webpackJsonpblog-frontend"]||[]).push([[0],{24:function(e,t,a){},29:function(e,t,a){e.exports=a(45)},34:function(e,t,a){},35:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),o=a.n(c),s=(a(34),a(35),a(36),a(11)),m=a.n(s),l=a(16),i=a(9),u=a(26),p=(a(38),function(){return r.a.createElement("div",{className:"loading-container"},r.a.createElement("h1",null,"Loading..."),r.a.createElement(u.a,{animation:"border",variant:"primary",role:"status"}))}),h=a(12),d=a(17),f=function(e){return r.a.createElement(h.a,{className:"card-container",style:{width:"18rem"}},r.a.createElement(h.a.Img,{className:"card-img",variant:"top",src:e.image}),r.a.createElement(h.a.Body,{className:"card-body"},r.a.createElement(h.a.Title,null,e.title),r.a.createElement(h.a.Text,null,"Posted on: ",e.timestamp," | Last Edit : ",e.lastUpdate),r.a.createElement(d.a,{variant:"link",href:"/posts/".concat(e.id)},"View post")))},E=(a(39),function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!0),s=Object(i.a)(o,2),u=s[0],h=s[1],d=Object(n.useState)(!1),E=Object(i.a)(d,2),v=(E[0],E[1]);Object(n.useEffect)((function(){(function(){var e=Object(l.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(!1),"https://vincephung-blog.glitch.me/api/posts",e.next=5,fetch("https://vincephung-blog.glitch.me/api/posts",{mode:"cors"});case 5:if(!(t=e.sent).ok){e.next=15;break}return e.next=9,t.json();case 9:return a=e.sent,c(a),h(!1),e.abrupt("return",a);case 15:v(!0),c(null);case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(0),new Error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var b=a.filter((function(e){return e.published}));return r.a.createElement("div",{className:"home-container"},u?r.a.createElement(p,null):"",r.a.createElement("h1",{className:"post-header"},"Current posts"),r.a.createElement("div",{className:"post-container"},r.a.createElement("div",{className:"post"},b.map((function(e){return r.a.createElement(f,{title:e.title,key:e._id,timestamp:e.timestamp,lastUpdate:e.lastUpdate||"Not edited",image:e.image,id:e._id})})))))}),v=(a(24),function(e){return r.a.createElement("div",{className:"commentContainer"},r.a.createElement("div",{className:"singleComment"},r.a.createElement("h4",{className:"commentAuthor"},e.author),r.a.createElement("p",null,e.content),r.a.createElement("p",{className:"commentDate"},e.timestamp)))}),b=function(e){return r.a.createElement("div",{className:"postContainer"},r.a.createElement("div",{className:"postSection"},r.a.createElement("h1",{className:"postTitle"},e.title),r.a.createElement("hr",null),r.a.createElement("p",{className:"postDate"},"Posted on ",e.timestamp),r.a.createElement("hr",null),r.a.createElement("img",{src:e.image,alt:"post img"}),r.a.createElement("hr",null),r.a.createElement("p",{className:"postContent"},e.postContent),r.a.createElement("hr",null)),r.a.createElement("div",{className:"commentForm"},r.a.createElement(h.a,null,r.a.createElement(h.a.Body,null,r.a.createElement(h.a.Title,null,"Leave a comment:"),r.a.createElement("form",{className:"form-group",onSubmit:e.handleCommentPost},r.a.createElement("label",{className:"label",htmlFor:"name"},"Name:"),r.a.createElement("input",{name:"commentAuthor",value:e.commentAuthor,onChange:e.handleCommentChange,type:"text",minLength:"5",required:!0}),r.a.createElement("hr",null),r.a.createElement("textarea",{className:"form-control",rows:"3",name:"content",value:e.commentContent,onChange:e.handleCommentChange,minLength:"5",required:!0}),r.a.createElement(d.a,{type:"submit",variant:"primary"},"Post"))))),r.a.createElement("div",{className:"commentSection"},e.comments.map((function(e){return r.a.createElement(v,{author:e.author,key:e._id,content:e.content,timestamp:e.timestamp})}))))},g=function(e){var t=e.match,a=Object(n.useState)([]),c=Object(i.a)(a,2),o=c[0],s=c[1],u=Object(n.useState)([]),h=Object(i.a)(u,2),d=h[0],f=h[1],E=Object(n.useState)(""),v=Object(i.a)(E,2),g=v[0],j=v[1],N=Object(n.useState)(""),w=Object(i.a)(N,2),x=w[0],O=w[1],k=Object(n.useState)(!0),C=Object(i.a)(k,2),y=C[0],S=C[1],B=Object(n.useState)(!1),T=Object(i.a)(B,2),A=(T[0],T[1]),L=function(){A(!0),s(null)};Object(n.useEffect)((function(){(function(){var e=Object(l.a)(m.a.mark((function e(){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A(!1),a="https://vincephung-blog.glitch.me/api/posts/".concat(t.params.id),e.next=5,fetch(a,{mode:"cors"});case 5:if(!(n=e.sent).ok){e.next=15;break}return e.next=9,n.json();case 9:return r=e.sent,s(r),S(!1),e.abrupt("return",r);case 15:L();case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(0),new Error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}})()(),function(){var e=Object(l.a)(m.a.mark((function e(){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A(!1),a="https://vincephung-blog.glitch.me/api/posts/".concat(t.params.id,"/comments"),e.next=5,fetch(a,{mode:"cors"});case 5:if(!(n=e.sent).ok){e.next=15;break}return e.next=9,n.json();case 9:return r=e.sent,f(r),S(!1),e.abrupt("return",r);case 15:L();case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(0),new Error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}()()}),[t.params.id]);var P=function(){var e=Object(l.a)(m.a.mark((function e(a){var n,r,c,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=g,r=x,c="https://vincephung-blog.glitch.me/api/posts/".concat(t.params.id,"/comments"),e.next=6,fetch(c,{mode:"cors",method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({author:n,content:r})});case 6:return o=e.sent,e.next=9,o.json();case 9:s=e.sent,O(""),j(""),f(d.concat(s));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,y?r.a.createElement(p,null):"",r.a.createElement(b,{title:o.title,timestamp:o.timestamp,lastUpdate:o.lastUpdate||"Not edited",image:o.image,comments:d,postContent:o.content,id:o._id,handleCommentPost:P,handleCommentChange:function(e){"commentAuthor"===e.target.name?j(e.target.value):O(e.target.value)},commentAuthor:g,commentContent:x}))},j=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"This page does not exist.",r.a.createElement("a",{href:"/home"},"Click this to return to the homepage.")))},N=a(22),w=function(){return r.a.createElement(N.a,{bg:"dark",variant:"dark"},r.a.createElement(N.a.Brand,{href:"/home"},"Blog Home"))},x=a(27),O=a(3);var k=function(){return r.a.createElement(x.a,null,r.a.createElement(w,null),r.a.createElement(O.c,null,r.a.createElement(O.a,{exact:!0,path:"/home",component:E}),r.a.createElement(O.a,{exact:!0,path:"/posts/:id",component:g}),r.a.createElement(O.a,{path:"/",component:j})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.00ba1e56.chunk.js.map